<!DOCTYPE HTML>
<html lang="fr">
<head>
<!-- Generated by javadoc (21) -->
<title>FieldRail (alix 0.9.2-SNAPSHOT API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: com.github.oeuvres.alix.lucene.search, class: FieldRail">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-3.6.1.min.js"></script>
<script type="text/javascript" src="../../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="class-use/FieldRail.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li>Nested</li>
<li><a href="#field-summary">Field</a></li>
<li><a href="#constructor-summary">Constr</a></li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li><a href="#field-detail">Field</a></li>
<li><a href="#constructor-detail">Constr</a></li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li><a href="#field-detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor-detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.github.oeuvres.alix.lucene.search</a></div>
<h1 title="Class FieldRail" class="title">Class FieldRail</h1>
</div>
<div class="inheritance" title="Inheritance Tree"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">java.lang.Object</a>
<div class="inheritance">com.github.oeuvres.alix.lucene.search.FieldRail</div>
</div>
<section class="class-description" id="class-description">
<hr>
<div class="type-signature"><span class="modifiers">public class </span><span class="element-name type-name-label">FieldRail</span>
<span class="extends-implements">extends <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></span></div>
<div class="block">Persistent storage of full sequence of all document search for a field. Used
 for co-occurrences stats. Data structure of the file
 <p>
 int:maxDoc, maxDoc*[int:docLength], maxDoc*[docLength*[int:formId], int:-1]</div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="caption"><span>Fields</span></div>
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Field</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color"><code>static final org.apache.lucene.util.BytesRef[]</code></div>
<div class="col-second even-row-color"><code><a href="#BYTES0" class="member-name-link">BYTES0</a></code></div>
<div class="col-last even-row-color">
<div class="block">for <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html#toArray(T%5B%5D)" title="class or interface in java.util" class="external-link"><code>Collection.toArray(Object[])</code></a>.</div>
</div>
<div class="col-first odd-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/channels/FileChannel.html" title="class or interface in java.nio.channels" class="external-link">FileChannel</a></code></div>
<div class="col-second odd-row-color"><code><a href="#channel" class="member-name-link">channel</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Cache a fileChannel for read</div>
</div>
<div class="col-first even-row-color"><code>protected <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/MappedByteBuffer.html" title="class or interface in java.nio" class="external-link">MappedByteBuffer</a></code></div>
<div class="col-second even-row-color"><code><a href="#channelMap" class="member-name-link">channelMap</a></code></div>
<div class="col-last even-row-color">
<div class="block">A buffer on file</div>
</div>
<div class="col-first odd-row-color"><code>protected org.apache.lucene.util.BytesRefHash</code></div>
<div class="col-second odd-row-color"><code><a href="#dic" class="member-name-link">dic</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Dictionary of terms from this field.</div>
</div>
<div class="col-first even-row-color"><code>protected int[]</code></div>
<div class="col-second even-row-color"><code><a href="#docId4len" class="member-name-link">docId4len</a></code></div>
<div class="col-last even-row-color">
<div class="block">docId4le[docId] =  Index of sizes for each doc</div>
</div>
<div class="col-first odd-row-color"><code>protected int[]</code></div>
<div class="col-second odd-row-color"><code><a href="#docId4offset" class="member-name-link">docId4offset</a></code></div>
<div class="col-last odd-row-color">
<div class="block">docId4offset[docId] = offset, start index of positions for each doc in channel</div>
</div>
<div class="col-first even-row-color"><code>protected int</code></div>
<div class="col-second even-row-color"><code><a href="#docsAll" class="member-name-link">docsAll</a></code></div>
<div class="col-last even-row-color">
<div class="block">Global count of docs relevant for this field.</div>
</div>
<div class="col-first odd-row-color"><code>protected final <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color"><code><a href="#fieldName" class="member-name-link">fieldName</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Name of a lucene field from which extract and cache stats.</div>
</div>
<div class="col-first even-row-color"><code>protected int[]</code></div>
<div class="col-second even-row-color"><code><a href="#formId4docs" class="member-name-link">formId4docs</a></code></div>
<div class="col-last even-row-color">
<div class="block">formId4docs[formId] = docs; count of docs by form.</div>
</div>
<div class="col-first odd-row-color"><code>protected final org.apache.lucene.index.FieldInfo</code></div>
<div class="col-second odd-row-color"><code><a href="#info" class="member-name-link">info</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Infos about the lucene field.</div>
</div>
<div class="col-first even-row-color"><code>protected final int</code></div>
<div class="col-second even-row-color"><code><a href="#maxDoc" class="member-name-link">maxDoc</a></code></div>
<div class="col-last even-row-color">
<div class="block">One greater than the largest possible docId.</div>
</div>
<div class="col-first odd-row-color"><code>protected int</code></div>
<div class="col-second odd-row-color"><code><a href="#maxForm" class="member-name-link">maxForm</a></code></div>
<div class="col-last odd-row-color">
<div class="block">Number of different values found = biggest formId + 1.</div>
</div>
<div class="col-first even-row-color"><code>protected final org.apache.lucene.index.DirectoryReader</code></div>
<div class="col-second even-row-color"><code><a href="#reader" class="member-name-link">reader</a></code></div>
<div class="col-last even-row-color">
<div class="block">Lucene index reader, cache the state.</div>
</div>
</div>
</section>
</li>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<li>
<section class="constructor-summary" id="constructor-summary">
<h2>Constructor Summary</h2>
<div class="caption"><span>Constructors</span></div>
<div class="summary-table two-column-summary">
<div class="table-header col-first">Constructor</div>
<div class="table-header col-last">Description</div>
<div class="col-constructor-name even-row-color"><code><a href="#%3Cinit%3E(com.github.oeuvres.alix.lucene.search.FieldText)" class="member-name-link">FieldRail</a><wbr>(<a href="FieldText.html" title="class in com.github.oeuvres.alix.lucene.search">FieldText</a>&nbsp;fieldText)</code></div>
<div class="col-last even-row-color">
<div class="block">Load rail of words as int, build it as file if necessary.</div>
</div>
</div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab4" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab4', 3)" class="table-tab">Concrete Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel">
<div class="summary-table three-column-summary" aria-labelledby="method-summary-table-tab0">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.apache.lucene.util.BytesRef[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#bytesSorted(int%5B%5D)" class="member-name-link">bytesSorted</a><wbr>(int[]&nbsp;formIds)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Normalize a list of formIds to search in an <code>IndexReader</code>.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.apache.lucene.util.BytesRef[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#bytesSorted(java.lang.CharSequence%5B%5D)" class="member-name-link">bytesSorted</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link">CharSequence</a>[]&nbsp;forms)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Normalize a list of forms to search in an <code>IndexReader</code>.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int[][]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#coocmat(int,int,int,org.apache.lucene.util.BitSet)" class="member-name-link">coocmat</a><wbr>(int&nbsp;maxForm,
 int&nbsp;left,
 int&nbsp;right,
 org.apache.lucene.util.BitSet&nbsp;docFilter)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Build a square matrix of co-occurencies.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FormEnum.html" title="class in com.github.oeuvres.alix.lucene.search">FormEnum</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#coocs(int%5B%5D,int,int,org.apache.lucene.util.BitSet)" class="member-name-link">coocs</a><wbr>(int[]&nbsp;pivotIds,
 int&nbsp;left,
 int&nbsp;right,
 org.apache.lucene.util.BitSet&nbsp;docFilter)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Build a freqList of coocurrents , attached to a FormEnum object.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#docs(int)" class="member-name-link">docs</a><wbr>(int&nbsp;formId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">How many docs in all index for this formId ?</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#docsAll()" class="member-name-link">docsAll</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Total count of document affected by the field.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../util/EdgeMatrix.html" title="class in com.github.oeuvres.alix.util">EdgeMatrix</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#edges(int%5B%5D,int,int,int%5B%5D,org.apache.lucene.util.BitSet)" class="member-name-link">edges</a><wbr>(int[]&nbsp;pivotIds,
 int&nbsp;left,
 int&nbsp;right,
 int[]&nbsp;coocIds,
 org.apache.lucene.util.BitSet&nbsp;docFilter)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Loop on a set of pivots, explore their context,
 record edges between a set of cooccurents in these contexts.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../util/EdgeMatrix.html" title="class in com.github.oeuvres.alix.util">EdgeMatrix</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#edges(int%5B%5D,int,org.apache.lucene.util.BitSet)" class="member-name-link">edges</a><wbr>(int[]&nbsp;formIds,
 int&nbsp;distance,
 org.apache.lucene.util.BitSet&nbsp;docFilter)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">With a set of int formIds, run accross full or part of rails, to collect
 co-occs between those selected words.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="../../util/EdgeMap.html" title="class in com.github.oeuvres.alix.util">EdgeMap</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#expressions(org.apache.lucene.util.BitSet,com.github.oeuvres.alix.fr.TagFilter,com.github.oeuvres.alix.fr.TagFilter,com.github.oeuvres.alix.fr.TagFilter)" class="member-name-link">expressions</a><wbr>(org.apache.lucene.util.BitSet&nbsp;docFilter,
 <a href="../../fr/TagFilter.html" title="class in com.github.oeuvres.alix.fr">TagFilter</a>&nbsp;start,
 <a href="../../fr/TagFilter.html" title="class in com.github.oeuvres.alix.fr">TagFilter</a>&nbsp;middle,
 <a href="../../fr/TagFilter.html" title="class in com.github.oeuvres.alix.fr">TagFilter</a>&nbsp;end)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Loop on the rail to find expression (2 plain words with possible stop words
 between but not holes or punctuation).</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="FieldText.html" title="class in com.github.oeuvres.alix.lucene.search">FieldText</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#fieldText()" class="member-name-link">fieldText</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns underlying <a href="FieldText.html" title="class in com.github.oeuvres.alix.lucene.search"><code>FieldText</code></a> given to constructor <a href="#%3Cinit%3E(com.github.oeuvres.alix.lucene.search.FieldText)"><code>FieldRail(FieldText)</code></a></div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#form(int)" class="member-name-link">form</a><wbr>(int&nbsp;formId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get String form for a formId.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>org.apache.lucene.util.BytesRef</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#form(int,org.apache.lucene.util.BytesRef)" class="member-name-link">form</a><wbr>(int&nbsp;formId,
 org.apache.lucene.util.BytesRef&nbsp;bytes)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get a String form for a formId, using a mutable array of bytes.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#formId(java.lang.CharSequence)" class="member-name-link">formId</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link">CharSequence</a>&nbsp;form)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns formId &gt;= 0 if exists, or -1 if not, like <code>BytesRefHash.find(BytesRef)</code></div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#formId(org.apache.lucene.util.BytesRef)" class="member-name-link">formId</a><wbr>(org.apache.lucene.util.BytesRef&nbsp;bytes)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns formId &gt;= 0 if exists, or -1 if not, like <code>BytesRefHash.find(BytesRef)</code></div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#formIds(java.lang.CharSequence%5B%5D)" class="member-name-link">formIds</a><wbr>(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link">CharSequence</a>[]&nbsp;forms)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a sorted array of formId ready for binarySearch, or
 null if no words found.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#formIds(org.apache.lucene.util.BytesRef%5B%5D)" class="member-name-link">formIds</a><wbr>(org.apache.lucene.util.BytesRef[]&nbsp;forms)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns a sorted array of formId for found words, ready for binarySearch, or
 null if not found.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#forms(int%5B%5D)" class="member-name-link">forms</a><wbr>(int[]&nbsp;rail)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get forms in order from a vector of formId.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>long[]</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#freqs(org.apache.lucene.util.BitSet)" class="member-name-link">freqs</a><wbr>(org.apache.lucene.util.BitSet&nbsp;docFilter)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">From a set of documents provided as a BitSet, return a freqlist as an int
 vector, where index is the formId for the field, the value is count of
 occurrences of the term.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#length(org.apache.lucene.index.Terms)" class="member-name-link">length</a><wbr>(org.apache.lucene.index.Terms&nbsp;termVector)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Count document size by the positions in the term vector.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#maxDoc()" class="member-name-link">maxDoc</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Returns one greater than the largest possible document number.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#maxForm()" class="member-name-link">maxForm</a>()</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Count of different values.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#name()" class="member-name-link">name</a>()</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Get name of this field.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>protected <a href="../../util/RowcolQueue.html" title="class in com.github.oeuvres.alix.util">RowcolQueue</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#positions(org.apache.lucene.util.BytesRef%5B%5D,org.apache.lucene.util.BitSet)" class="member-name-link">positions</a><wbr>(org.apache.lucene.util.BytesRef[]&nbsp;pivotBytes,
 org.apache.lucene.util.BitSet&nbsp;docFilter)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">For an ordered set of forms as bytes, obtained from 
 <code>FieldCharsAbstract.bytesSorted(CharSequence[])</code>
 or <code>FieldCharsAbstract.bytesSorted(int[])</code>,
 get an ordered list of positions by docId.</div>
</div>
<div class="col-first odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code>void</code></div>
<div class="col-second odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#rail(org.apache.lucene.index.Terms,com.github.oeuvres.alix.util.IntList)" class="member-name-link">rail</a><wbr>(org.apache.lucene.index.Terms&nbsp;terms,
 <a href="../../util/IntList.html" title="class in com.github.oeuvres.alix.util">IntList</a>&nbsp;buf)</code></div>
<div class="col-last odd-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">Flatten search of a document in a position order, according to the dictionary
 of search.</div>
</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4"><code><a href="#toString(int)" class="member-name-link">toString</a><wbr>(int&nbsp;docId)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab4">
<div class="block">A document as a sequence of tokens.</div>
</div>
</div>
</div>
</div>
<div class="inherited-list">
<h3 id="methods-inherited-from-class-java.lang.Object">Methods inherited from class&nbsp;java.lang.<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html" title="class or interface in java.lang" class="external-link">Object</a></h3>
<code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#clone()" title="class or interface in java.lang" class="external-link">clone</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object)" title="class or interface in java.lang" class="external-link">equals</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#finalize()" title="class or interface in java.lang" class="external-link">finalize</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#getClass()" title="class or interface in java.lang" class="external-link">getClass</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#hashCode()" title="class or interface in java.lang" class="external-link">hashCode</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notify()" title="class or interface in java.lang" class="external-link">notify</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#notifyAll()" title="class or interface in java.lang" class="external-link">notifyAll</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#toString()" title="class or interface in java.lang" class="external-link">toString</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait()" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long)" title="class or interface in java.lang" class="external-link">wait</a>, <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Object.html#wait(long,int)" title="class or interface in java.lang" class="external-link">wait</a></code></div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ FIELD DETAIL =========== -->
<li>
<section class="field-details" id="field-detail">
<h2>Field Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="channel">
<h3>channel</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/channels/FileChannel.html" title="class or interface in java.nio.channels" class="external-link">FileChannel</a></span>&nbsp;<span class="element-name">channel</span></div>
<div class="block">Cache a fileChannel for read</div>
</section>
</li>
<li>
<section class="detail" id="channelMap">
<h3>channelMap</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/nio/MappedByteBuffer.html" title="class or interface in java.nio" class="external-link">MappedByteBuffer</a></span>&nbsp;<span class="element-name">channelMap</span></div>
<div class="block">A buffer on file</div>
</section>
</li>
<li>
<section class="detail" id="docId4offset">
<h3>docId4offset</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name">docId4offset</span></div>
<div class="block">docId4offset[docId] = offset, start index of positions for each doc in channel</div>
</section>
</li>
<li>
<section class="detail" id="docId4len">
<h3>docId4len</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name">docId4len</span></div>
<div class="block">docId4le[docId] =  Index of sizes for each doc</div>
</section>
</li>
<li>
<section class="detail" id="BYTES0">
<h3>BYTES0</h3>
<div class="member-signature"><span class="modifiers">public static final</span>&nbsp;<span class="return-type">org.apache.lucene.util.BytesRef[]</span>&nbsp;<span class="element-name">BYTES0</span></div>
<div class="block">for <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/util/Collection.html#toArray(T%5B%5D)" title="class or interface in java.util" class="external-link"><code>Collection.toArray(Object[])</code></a>.</div>
</section>
</li>
<li>
<section class="detail" id="maxForm">
<h3>maxForm</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">maxForm</span></div>
<div class="block">Number of different values found = biggest formId + 1.</div>
</section>
</li>
<li>
<section class="detail" id="dic">
<h3>dic</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">org.apache.lucene.util.BytesRefHash</span>&nbsp;<span class="element-name">dic</span></div>
<div class="block">Dictionary of terms from this field.</div>
</section>
</li>
<li>
<section class="detail" id="formId4docs">
<h3>formId4docs</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name">formId4docs</span></div>
<div class="block">formId4docs[formId] = docs; count of docs by form.</div>
</section>
</li>
<li>
<section class="detail" id="fieldName">
<h3>fieldName</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">fieldName</span></div>
<div class="block">Name of a lucene field from which extract and cache stats.</div>
</section>
</li>
<li>
<section class="detail" id="reader">
<h3>reader</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">org.apache.lucene.index.DirectoryReader</span>&nbsp;<span class="element-name">reader</span></div>
<div class="block">Lucene index reader, cache the state.</div>
</section>
</li>
<li>
<section class="detail" id="info">
<h3>info</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">org.apache.lucene.index.FieldInfo</span>&nbsp;<span class="element-name">info</span></div>
<div class="block">Infos about the lucene field.</div>
</section>
</li>
<li>
<section class="detail" id="maxDoc">
<h3>maxDoc</h3>
<div class="member-signature"><span class="modifiers">protected final</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">maxDoc</span></div>
<div class="block">One greater than the largest possible docId.</div>
</section>
</li>
<li>
<section class="detail" id="docsAll">
<h3>docsAll</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">docsAll</span></div>
<div class="block">Global count of docs relevant for this field.</div>
</section>
</li>
</ul>
</section>
</li>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<li>
<section class="constructor-details" id="constructor-detail">
<h2>Constructor Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="&lt;init&gt;(com.github.oeuvres.alix.lucene.search.FieldText)">
<h3>FieldRail</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="element-name">FieldRail</span><wbr><span class="parameters">(<a href="FieldText.html" title="class in com.github.oeuvres.alix.lucene.search">FieldText</a>&nbsp;fieldText)</span>
          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Load rail of words as int, build it as file if necessary.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>fieldText</code> - alix stats on an indexed and tokenized lucene field.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - lucene errors.</dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="coocs(int[],int,int,org.apache.lucene.util.BitSet)">
<h3>coocs</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FormEnum.html" title="class in com.github.oeuvres.alix.lucene.search">FormEnum</a></span>&nbsp;<span class="element-name">coocs</span><wbr><span class="parameters">(int[]&nbsp;pivotIds,
 int&nbsp;left,
 int&nbsp;right,
 org.apache.lucene.util.BitSet&nbsp;docFilter)</span>
               throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Build a freqList of coocurrents , attached to a FormEnum object.
 Returns the count of occurences found. This method may need a lot of optional
 params, set on the FormEnum object.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pivotIds</code> - an set of lucene terms.</dd>
<dd><code>left</code> - width of context before a pivot.</dd>
<dd><code>right</code> - width of context after a pivot.</dd>
<dd><code>docFilter</code> - optional, set of lucene internal docId to restrict collect.</dd>
<dt>Returns:</dt>
<dd>forms with freq.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - lucene errors.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="coocmat(int,int,int,org.apache.lucene.util.BitSet)">
<h3>coocmat</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int[][]</span>&nbsp;<span class="element-name">coocmat</span><wbr><span class="parameters">(int&nbsp;maxForm,
 int&nbsp;left,
 int&nbsp;right,
 org.apache.lucene.util.BitSet&nbsp;docFilter)</span>
                throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Build a square matrix of co-occurencies.
 cooc[3][5] = 2 means, for pivot word with formId=3, there are 2 co-occurences
 of word with formId=5, in the context of <code>-left</code> and <code>+right</code>
 words around the pivot.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>maxForm</code> - size of the side of the square matrix to return, allow to prune low frequencies occurrences.</dd>
<dd><code>left</code> - width of context before a pivot.</dd>
<dd><code>right</code> - width of context after a pivot.</dd>
<dd><code>docFilter</code> - optional, set of lucene internal docId to restrict collect.</dd>
<dt>Returns:</dt>
<dd>a co-occureny matrix.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - lucene errors.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="edges(int[],int,int,int[],org.apache.lucene.util.BitSet)">
<h3>edges</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../util/EdgeMatrix.html" title="class in com.github.oeuvres.alix.util">EdgeMatrix</a></span>&nbsp;<span class="element-name">edges</span><wbr><span class="parameters">(int[]&nbsp;pivotIds,
 int&nbsp;left,
 int&nbsp;right,
 int[]&nbsp;coocIds,
 org.apache.lucene.util.BitSet&nbsp;docFilter)</span>
                 throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Loop on a set of pivots, explore their context,
 record edges between a set of cooccurents in these contexts.
 The set coocIds should have been obtained by <a href="#coocs(int%5B%5D,int,int,org.apache.lucene.util.BitSet)"><code>coocs(int[], int, int, BitSet)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pivotIds</code> - set of formId from a <a href="FieldText.html" title="class in com.github.oeuvres.alix.lucene.search"><code>FieldText</code></a>, word pivots to search around.</dd>
<dd><code>left</code> - left size of context in tokens.</dd>
<dd><code>right</code> - right size of context in tokens.</dd>
<dd><code>coocIds</code> - set of formId from a <a href="FieldText.html" title="class in com.github.oeuvres.alix.lucene.search"><code>FieldText</code></a>, words to search in the contexts</dd>
<dd><code>docFilter</code> - optional, set of lucene internal docId to restrict collect.</dd>
<dt>Returns:</dt>
<dd>a matrix of formId pairs with count for each pair.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - lucene errors.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="edges(int[],int,org.apache.lucene.util.BitSet)">
<h3>edges</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../util/EdgeMatrix.html" title="class in com.github.oeuvres.alix.util">EdgeMatrix</a></span>&nbsp;<span class="element-name">edges</span><wbr><span class="parameters">(int[]&nbsp;formIds,
 int&nbsp;distance,
 org.apache.lucene.util.BitSet&nbsp;docFilter)</span></div>
<div class="block">With a set of int formIds, run accross full or part of rails, to collect
 co-occs between those selected words.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>formIds</code> - set of words as formId from a <a href="FieldText.html" title="class in com.github.oeuvres.alix.lucene.search"><code>FieldText</code></a>.</dd>
<dd><code>distance</code> - maximal distance in tokens between collected pairs.</dd>
<dd><code>docFilter</code> - optional, set of lucene internal docId to restrict collect.</dd>
<dt>Returns:</dt>
<dd>a formIds x formIds matrix with count for each pair.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="expressions(org.apache.lucene.util.BitSet,com.github.oeuvres.alix.fr.TagFilter,com.github.oeuvres.alix.fr.TagFilter,com.github.oeuvres.alix.fr.TagFilter)">
<h3>expressions</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="../../util/EdgeMap.html" title="class in com.github.oeuvres.alix.util">EdgeMap</a></span>&nbsp;<span class="element-name">expressions</span><wbr><span class="parameters">(org.apache.lucene.util.BitSet&nbsp;docFilter,
 <a href="../../fr/TagFilter.html" title="class in com.github.oeuvres.alix.fr">TagFilter</a>&nbsp;start,
 <a href="../../fr/TagFilter.html" title="class in com.github.oeuvres.alix.fr">TagFilter</a>&nbsp;middle,
 <a href="../../fr/TagFilter.html" title="class in com.github.oeuvres.alix.fr">TagFilter</a>&nbsp;end)</span></div>
<div class="block">Loop on the rail to find expression (2 plain words with possible stop words
 between but not holes or punctuation).</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>docFilter</code> - optional, a set of lucene internal doc id for a partition.</dd>
<dd><code>start</code> - first word of an expression, a set of tags (stopwords, verbs…) to exclude</dd>
<dd><code>middle</code> - words between start and end, a set of tags (stopwords, verbs…) to exclude</dd>
<dd><code>end</code> - last word of an expression, a set of tags (stopwords, verbs…) to exclude</dd>
<dt>Returns:</dt>
<dd>expressions as an <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/Iterable.html" title="class or interface in java.lang" class="external-link"><code>Iterable</code></a> of edges</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="fieldText()">
<h3>fieldText</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="FieldText.html" title="class in com.github.oeuvres.alix.lucene.search">FieldText</a></span>&nbsp;<span class="element-name">fieldText</span>()</div>
<div class="block">Returns underlying <a href="FieldText.html" title="class in com.github.oeuvres.alix.lucene.search"><code>FieldText</code></a> given to constructor <a href="#%3Cinit%3E(com.github.oeuvres.alix.lucene.search.FieldText)"><code>FieldRail(FieldText)</code></a></div>
<dl class="notes">
<dt>Returns:</dt>
<dd>the underlying <code>FieldText</code></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="freqs(org.apache.lucene.util.BitSet)">
<h3>freqs</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">long[]</span>&nbsp;<span class="element-name">freqs</span><wbr><span class="parameters">(org.apache.lucene.util.BitSet&nbsp;docFilter)</span>
             throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">From a set of documents provided as a BitSet, return a freqlist as an int
 vector, where index is the formId for the field, the value is count of
 occurrences of the term. Counts are extracted from stored <i>rails</i>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>docFilter</code> - set of lucene internal docId to restrict collect.</dd>
<dt>Returns:</dt>
<dd>array[formId] = freq.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - Lucene errors.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="length(org.apache.lucene.index.Terms)">
<h3>length</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">length</span><wbr><span class="parameters">(org.apache.lucene.index.Terms&nbsp;termVector)</span>
           throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Count document size by the positions in the term vector.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>termVector</code> - <code>TermVectors.get(int, String)</code>.</dd>
<dt>Returns:</dt>
<dd>count of indexed tokens for this document.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - lucene errors.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="positions(org.apache.lucene.util.BytesRef[],org.apache.lucene.util.BitSet)">
<h3>positions</h3>
<div class="member-signature"><span class="modifiers">protected</span>&nbsp;<span class="return-type"><a href="../../util/RowcolQueue.html" title="class in com.github.oeuvres.alix.util">RowcolQueue</a></span>&nbsp;<span class="element-name">positions</span><wbr><span class="parameters">(org.apache.lucene.util.BytesRef[]&nbsp;pivotBytes,
 org.apache.lucene.util.BitSet&nbsp;docFilter)</span>
                         throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">For an ordered set of forms as bytes, obtained from 
 <code>FieldCharsAbstract.bytesSorted(CharSequence[])</code>
 or <code>FieldCharsAbstract.bytesSorted(int[])</code>,
 get an ordered list of positions by docId.
 Used by <a href="#coocs(int%5B%5D,int,int,org.apache.lucene.util.BitSet)"><code>coocs(int[], int, int, BitSet)</code></a>.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>pivotBytes</code> - mandatory, ordered set of terms of this field, as bytes.</dd>
<dd><code>docFilter</code> - optional, set of lucene internal docId to limit search.</dd>
<dt>Returns:</dt>
<dd>an iterator of (row, col) pairs.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - lucene errors.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="rail(org.apache.lucene.index.Terms,com.github.oeuvres.alix.util.IntList)">
<h3>rail</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">void</span>&nbsp;<span class="element-name">rail</span><wbr><span class="parameters">(org.apache.lucene.index.Terms&nbsp;terms,
 <a href="../../util/IntList.html" title="class in com.github.oeuvres.alix.util">IntList</a>&nbsp;buf)</span>
          throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Flatten search of a document in a position order, according to the dictionary
 of search. Write it in a binary buffer, ready to to be stored in a
 BinaryField. <code>BinaryDocValuesField</code> The
 buffer could be modified if resizing was needed.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>terms</code> - A term vector of a document with positions.</dd>
<dd><code>buf</code> - A reusable binary buffer to index.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - Lucene errors.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="toString(int)">
<h3>toString</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">toString</span><wbr><span class="parameters">(int&nbsp;docId)</span></div>
<div class="block">A document as a sequence of tokens.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>docId</code> - an internal lucene document id.</dd>
<dt>Returns:</dt>
<dd>sequence of tokens.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="docs(int)">
<h3>docs</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">docs</span><wbr><span class="parameters">(int&nbsp;formId)</span></div>
<div class="block">How many docs in all index for this formId ?</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>formId</code> - id of a form.</dd>
<dt>Returns:</dt>
<dd>doc count.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="form(int)">
<h3>form</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">form</span><wbr><span class="parameters">(int&nbsp;formId)</span></div>
<div class="block">Get String form for a formId.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>formId</code> - a form id.</dd>
<dt>Returns:</dt>
<dd>the chars as a string.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="form(int,org.apache.lucene.util.BytesRef)">
<h3>form</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">org.apache.lucene.util.BytesRef</span>&nbsp;<span class="element-name">form</span><wbr><span class="parameters">(int&nbsp;formId,
 org.apache.lucene.util.BytesRef&nbsp;bytes)</span></div>
<div class="block">Get a String form for a formId, using a mutable array of bytes.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>formId</code> - a form id.</dd>
<dd><code>bytes</code> - reusable bytes.</dd>
<dt>Returns:</dt>
<dd>the populated bytes.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="formId(org.apache.lucene.util.BytesRef)">
<h3>formId</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">formId</span><wbr><span class="parameters">(org.apache.lucene.util.BytesRef&nbsp;bytes)</span></div>
<div class="block">Returns formId &gt;= 0 if exists, or -1 if not, like <code>BytesRefHash.find(BytesRef)</code></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>bytes</code> - reusable utf8 bytes to look for.</dd>
<dt>Returns:</dt>
<dd>formId &gt;= 0 if found, -1 otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="formId(java.lang.CharSequence)">
<h3>formId</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">formId</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link">CharSequence</a>&nbsp;form)</span></div>
<div class="block">Returns formId &gt;= 0 if exists, or -1 if not, like <code>BytesRefHash.find(BytesRef)</code></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>form</code> - char version of a form.</dd>
<dt>Returns:</dt>
<dd>formId &gt;= 0 if found, -1 otherwise.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="formIds(java.lang.CharSequence[])">
<h3>formIds</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name">formIds</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link">CharSequence</a>[]&nbsp;forms)</span>
              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Returns a sorted array of formId ready for binarySearch, or
 null if no words found.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>forms</code> - set of forms as <a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link"><code>CharSequence</code></a></dd>
<dt>Returns:</dt>
<dd>a sorted array of formId found, or null if no form found for this fiels.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - lucene errors.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="formIds(org.apache.lucene.util.BytesRef[])">
<h3>formIds</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int[]</span>&nbsp;<span class="element-name">formIds</span><wbr><span class="parameters">(org.apache.lucene.util.BytesRef[]&nbsp;forms)</span>
              throws <span class="exceptions"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></span></div>
<div class="block">Returns a sorted array of formId for found words, ready for binarySearch, or
 null if not found.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>forms</code> - array of form as bytes.</dd>
<dt>Returns:</dt>
<dd>a sorted array of formId found, or null if no form found for this fields.</dd>
<dt>Throws:</dt>
<dd><code><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/io/IOException.html" title="class or interface in java.io" class="external-link">IOException</a></code> - lucene errors.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="forms(int[])">
<h3>forms</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a>[]</span>&nbsp;<span class="element-name">forms</span><wbr><span class="parameters">(int[]&nbsp;rail)</span></div>
<div class="block">Get forms in order from a vector of formId.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>rail</code> - sequence of words as formId.</dd>
<dt>Returns:</dt>
<dd>sequence of words as String.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="maxForm()">
<h3>maxForm</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">maxForm</span>()</div>
<div class="block">Count of different values.
 Biggest formId+1 like <code>IndexReader.maxDoc()</code>. Used to build fixed array of form id.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>max value id.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="bytesSorted(java.lang.CharSequence[])">
<h3>bytesSorted</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">org.apache.lucene.util.BytesRef[]</span>&nbsp;<span class="element-name">bytesSorted</span><wbr><span class="parameters">(<a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/CharSequence.html" title="class or interface in java.lang" class="external-link">CharSequence</a>[]&nbsp;forms)</span></div>
<div class="block">Normalize a list of forms to search in an <code>IndexReader</code>.
 Filter null and forms absent from the dictionary.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>forms</code> - collection of forms to test against dictionary.</dd>
<dt>Returns:</dt>
<dd>set of unique forms, sorted for efficient search with <code>TermsEnum.seekExact(BytesRef)</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="bytesSorted(int[])">
<h3>bytesSorted</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">org.apache.lucene.util.BytesRef[]</span>&nbsp;<span class="element-name">bytesSorted</span><wbr><span class="parameters">(int[]&nbsp;formIds)</span></div>
<div class="block">Normalize a list of formIds to search in an <code>IndexReader</code>.
 Filter forms absent from the dictionary.</div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>formIds</code> - collection of ids to test against dictionary.</dd>
<dt>Returns:</dt>
<dd>set of unique forms, sorted for efficient search with <code>TermsEnum.seekExact(BytesRef)</code>.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="docsAll()">
<h3>docsAll</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">docsAll</span>()</div>
<div class="block">Total count of document affected by the field.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd>doc count.</dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="name()">
<h3>name</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type"><a href="https://docs.oracle.com/en/java/javase/21/docs/api/java.base/java/lang/String.html" title="class or interface in java.lang" class="external-link">String</a></span>&nbsp;<span class="element-name">name</span>()</div>
<div class="block">Get name of this field.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><a href="#fieldName"><code>fieldName</code></a></dd>
</dl>
</section>
</li>
<li>
<section class="detail" id="maxDoc()">
<h3>maxDoc</h3>
<div class="member-signature"><span class="modifiers">public</span>&nbsp;<span class="return-type">int</span>&nbsp;<span class="element-name">maxDoc</span>()</div>
<div class="block">Returns one greater than the largest possible document number. 
 This may be used to, e.g.,determine how big to allocate an array which will have an element 
 for every document number in an index.</div>
<dl class="notes">
<dt>Returns:</dt>
<dd><code>BaseCompositeReader.maxDoc()</code></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &#169; 2025. All rights reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
